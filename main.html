<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Заполнение крестом из центра</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    canvas {
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
    .slider-container {
      margin: 10px 0;
      width: 300px;
    }
    .slider-container label {
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>

<canvas id="canvas" width="500" height="500"></canvas>

<div class="slider-container">
  <label>Радиус большого круга: <span id="bigRadiusVal">150</span></label>
  <input type="range" id="bigRadius" min="50" max="200" value="150" step="1">
</div>

<div class="slider-container">
  <label>Радиус маленьких кружков: <span id="smallRadiusVal">5</span></label>
  <input type="range" id="smallRadius" min="0.5" max="30" value="5" step="0.1">
</div>

<div>
  Количество маленьких кружков: <span id="count">0</span>
</div>

<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  const bigRadiusSlider = document.getElementById('bigRadius');
  const smallRadiusSlider = document.getElementById('smallRadius');
  const bigRadiusVal = document.getElementById('bigRadiusVal');
  const smallRadiusVal = document.getElementById('smallRadiusVal');
  const countDisplay = document.getElementById('count');

  const canvasCenter = { x: canvas.width / 2, y: canvas.height / 2 };

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const R = parseFloat(bigRadiusSlider.value);
    const r = parseFloat(smallRadiusSlider.value);

    bigRadiusVal.textContent = R.toFixed(1);
    smallRadiusVal.textContent = r.toFixed(1);

    // Рисуем большой круг
    ctx.beginPath();
    ctx.arc(canvasCenter.x, canvasCenter.y, R, 0, Math.PI * 2);
    ctx.strokeStyle = '#000';
    ctx.lineWidth = 2;
    ctx.stroke();

    let count = 0;

    // Функция рисования одного кружка, если он в пределах большого круга
    function tryDrawCircle(x, y) {
      const dx = x - canvasCenter.x;
      const dy = y - canvasCenter.y;
      if (dx*dx + dy*dy <= (R - r)*(R - r)) {
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI * 2);
        ctx.fillStyle = '#3498db';
        ctx.fill();
        count++;
      }
    }

    // Заполнение из центра крестом
    const step = r * 2; // расстояние между кружками
    for (let layer = 0; layer <= R; layer += step) {
      // Горизонтальная и вертикальная линии
      for (let offset = -layer; offset <= layer; offset += step) {
        tryDrawCircle(canvasCenter.x + offset, canvasCenter.y + layer); // верхняя горизонталь
        tryDrawCircle(canvasCenter.x + offset, canvasCenter.y - layer); // нижняя горизонталь
        tryDrawCircle(canvasCenter.x + layer, canvasCenter.y + offset); // правая вертикаль
        tryDrawCircle(canvasCenter.x - layer, canvasCenter.y + offset); // левая вертикаль
      }
      // Диагонали (опционально для более плотного заполнения)
      for (let d = -layer + step; d < layer; d += step) {
        tryDrawCircle(canvasCenter.x + d, canvasCenter.y + d); // диагональ \
        tryDrawCircle(canvasCenter.x + d, canvasCenter.y - d); // диагональ /
      }
    }

    countDisplay.textContent = count;
  }

  bigRadiusSlider.addEventListener('input', draw);
  smallRadiusSlider.addEventListener('input', draw);

  draw();
</script>

</body>
</html>
